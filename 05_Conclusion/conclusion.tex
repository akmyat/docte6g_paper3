\section{Conclusion}

This paper introduced the first fully open-source and feature-complete MQTT v3.1.1 implementation for the ns-3 simulator (\url{https://gitlab.com/simulations9070736/mqtt.git}), enabling end-to-end evaluation of publishâ€“subscribe communication within realistic IoT and DT environments. By integrating full QoS support, session management, and broker-side routing, the module allows researchers to study MQTT behavior across heterogeneous network stacks with transparency and configurability not previously available.

Using this implementation, we constructed a detailed Smart Warehouse Digital Twin scenario that reflects practical industrial traffic, including robot-control commands, operational events, and high-rate telemetry. Our comparative analysis of Ethernet, Wi-Fi 6, and 5G NR demonstrates that while MQTT overhead grows with QoS levels, its relative impact varies significantly across networks. In wired settings, protocol-level acknowledgments dominate latency, whereas in 5G NR, radio scheduling delay is the primary contributor, resulting in nearly identical performance across QoS levels for small payloads. Wi-Fi 6 offers strong throughput and moderate latency, making it suitable for non-critical telemetry but less reliable for stringent control operations.

Overall, the results highlight that 5G NR is the most suitable wireless technology for latency-bounded control traffic in industrial DTs, while Wi-Fi 6 remains an attractive option for cost-efficient high-bandwidth sensing workloads. The MQTT ns-3 module and the findings presented here establish a foundation for future research on DT-aware protocol design, cross-layer optimization, and hybrid network architectures in industrial automation.
