\subsection{Smart Warehouse Digital Twin Scenario Implementation using MQTT}

The Smart Warehouse Digital Twin scenario is implemented using the MQTT protocol to facilitate communication between various components of the warehouse system. 
The implementation consists of three main subsystems: Inventory Management System, Environmental Monitoring System, and Robot Management System. 
Each subsystem utilizes MQTT topics to publish and subscribe to relevant data.

\textbf{Environmental Monitoring System:} This subsystem illustrated in Figure \ref{fig:environmental_monitoring_system}, environmental parameters such as temperature and humidity within the warehouse.
All the environmental sensors register to controller using the topic \textit{/warehouse/sensor/[sensor\_name]/register} where the controller subscribe and listening on the topic \textit{/warehouse/sensor/[sensor\_name]/register}.
Temperature and humidity sensor periodically publish their reading to the topic \textit{/warehouse/sensor/[sensor\_name]/temperature} and \textit{/warehouse/sensor/[sensor\_name]/humidity} respectively. 
The controller subscribes to these topics to receive real-time updates on environmental conditions.
However, the camera sensor, only listen to the controller command on the topic \textit{/warehouse/sensor/[sensor\_name]/video/commands} to start or stop the video streaming.
The controller control the video stream of camera by publishing command message to the topic \textit{/warehouse/sensor/[sensor\_name]/video/commands/startStream} and \textit{/warehouse/sensor/[sensor\_name]/video/commands/stopStream}.
\begin{figure}[ht]
    \centering
    \includegraphics[width=0.8\linewidth]{images/environmetal_monitoring_system.png}
    \caption{Environmental Monitoring System MQTT Implementation}
    \label{fig:environmental_monitoring_system}
\end{figure}

\textbf{Inventory Management System:} This subsystem illustrated in Figure \ref{fig:inventory_management_system}, is responsible for tracking and managing the inventory within the warehouse.
Similar to the environmental monitoring system, all the inventory sensors register to the controller using the topic \textit{/warehouse/sensor/[sensor\_name]/register} where the controller subscribes and listens to the topic \textit{/warehouse/sensor/[sensor\_name]/register}.
The package sensor publishes the notification message to the topic \textit{/warehouse/sensor/[sensor\_name]/package} whenever a package arrives at the warehouse.
The controller subscribes to this topic and assigns to the available robot to pick up the package and places it on the rack.
Both the rack sensor and dropzone sensor wait for the controller command on the topic \textit{/warehouse/rack/[sensor\_name]/commands} and \textit{/warehouse/dropzone/[sensor\_name]/commands} respectively.
When the robot reaches the rack, the controller publishes the command to the topic \textit{/warehouse/rack/[sensor\_name]/commands/addPackage} to update the capacity of the rack.
As soon as the dropzone receives a request to retrieve the package, it notifies the controller on the topic \textit{/warehouse/dropzone/[sensor\_name]/commands/retrievePackage} and the controller assigns a robot to retrieve the package from the rack.
Similar to the place package operation, when the robot reaches the rack, the controller publishes the command on the topic \textit{/warehouse/rack/[sensor\_name]/commands/removePackage} to update the capacity of the rack.
As soon as the robot drops the package at the dropzone, the controller notifies the customer or truck using the topic \textit{/warehouse/dropzone/[sensor\_name]/commands/dropPackage}.
\begin{figure}[ht]
    \centering
    \includegraphics[width=0.8\linewidth]{images/inventory_management_system.png}
    \caption{Inventory Management System MQTT Implementation}
    \label{fig:inventory_management_system}
\end{figure}

\textbf{Robot Management System:} This subsystem illustrated in Figure \ref{fig:robot_management_system}, manages the fleet of robots operating within the warehouse.
All the robots register to controller using the topic \textit{/warehouse/robot/[robot\_name]/register} where the controller subscribes and listens to the topic \textit{/warehouse/robot/[robot\_name]/register}.
All the PICKUP, PLACE, RETRIEVE, and DROP operation are assigned to the robot as tasks by the controller through the topic \textit{/warehouse/robot/[robot\_name]/command/assignTask}.
When the robot completes the assigned task, it notifies the controller by publishing a message to the topic \textit{/warehouse/robot/[robot\_name]/status/taskCompleted}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.8\linewidth]{images/robot_management_system.png}
    \caption{Robot Management System MQTT Implementation}
    \label{fig:robot_management_system}
\end{figure}
